----- COMPLETE LOCALSCRIPT (StarterPlayerScripts) -----
local Players = game:GetService("Players")
local UIS = game:GetService("UserInputService")
local RS = game:GetService("RunService")
local TS = game:GetService("TweenService")

-- ========== CONFIGURATION ========== --
local VALID_KEYS = {
    "9075328-JHjhgGGkgGUY",
    "827945jkhs-nchs425-9283u",
    "238947hjbfds-ahudbgf732",
    "bzvlhjvbd-uy89473",
    "29487-ahgbadf", 
    "783465@^2@94#",
    "#*&^*%^%#-HG*(&tiyc 3568"
}
local player = Players.LocalPlayer
local keyValidated = false

-- ========== KEY SYSTEM ========== --
local keyGui = Instance.new("ScreenGui", player.PlayerGui)
keyGui.Name = "KeySystem"
keyGui.ResetOnSpawn = false

local keyFrame = Instance.new("Frame", keyGui)
keyFrame.Size = UDim2.new(0, 400, 0, 200)
keyFrame.Position = UDim2.new(0.5, -200, 0.5, -100)
keyFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 35)
keyFrame.AnchorPoint = Vector2.new(0.5, 0.5)
Instance.new("UICorner", keyFrame).CornerRadius = UDim.new(0, 12)

local keyInput = Instance.new("TextBox", keyFrame)
keyInput.Size = UDim2.new(0.8, 0, 0.4, 0)
keyInput.Position = UDim2.new(0.1, 0, 0.1, 0)
keyInput.PlaceholderText = "Enter activation key..."
keyInput.Text = ""
keyInput.BackgroundColor3 = Color3.fromRGB(50, 50, 60)
keyInput.TextColor3 = Color3.new(1,1,1)
Instance.new("UICorner", keyInput).CornerRadius = UDim.new(0, 8)

local submitBtn = Instance.new("TextButton", keyFrame)
submitBtn.Size = UDim2.new(0.6, 0, 0.4, 0)
submitBtn.Position = UDim2.new(0.2, 0, 0.55, 0)
submitBtn.Text = "INITIALIZE SYSTEM"
submitBtn.Font = Enum.Font.GothamBold
submitBtn.BackgroundColor3 = Color3.fromRGB(0, 90, 180)
submitBtn.TextColor3 = Color3.new(1,1,1)
Instance.new("UICorner", submitBtn).CornerRadius = UDim.new(0, 8)

-- Key validation
submitBtn.MouseButton1Click:Connect(function()
    for _, validKey in pairs(VALID_KEYS) do
        if keyInput.Text == validKey then
            keyValidated = true
            keyGui.Enabled = false
            game:GetService("StarterGui"):SetCore("SendNotification", {
                Title = "ACCESS GRANTED",
                Text = "System unlocked! Press RightShift",
                Duration = 3
            })
            return
        end
    end
    keyInput.Text = ""
    keyInput.PlaceholderText = "Invalid key! Try again..."
    task.wait(1)
    keyInput.PlaceholderText = "Enter activation key..."
end)

-- ========== MAIN GUI ========== --
local gui = Instance.new("ScreenGui", player.PlayerGui)
gui.ResetOnSpawn = false
gui.Enabled = false

local mainFrame = Instance.new("Frame", gui)
mainFrame.Size = UDim2.new(0, 700, 0, 500)
mainFrame.Position = UDim2.new(0.5, -350, 0.5, -250)
mainFrame.BackgroundColor3 = Color3.fromRGB(20, 20, 30)
mainFrame.Visible = false
mainFrame.AnchorPoint = Vector2.new(0.5, 0.5)
mainFrame.BackgroundTransparency = 1
Instance.new("UICorner", mainFrame).CornerRadius = UDim.new(0, 20)

-- Draggable title
local title = Instance.new("TextLabel", mainFrame)
title.Size = UDim2.new(1, 0, 0, 60)
title.Text = "Made by -SkillSpawnPlayz"
title.Font = Enum.Font.SciFi
title.TextColor3 = Color3.new(0, 0.75, 1)
title.TextSize = 32
title.BackgroundTransparency = 1
title.Active = true

-- Drag system
local dragging = false
local dragStart, frameStart

title.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = true
        dragStart = input.Position
        frameStart = mainFrame.Position
        
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragging = false
            end
        end)
    end
end)

UIS.InputChanged:Connect(function(input)
    if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
        local delta = input.Position - dragStart
        mainFrame.Position = UDim2.new(
            frameStart.X.Scale, 
            frameStart.X.Offset + delta.X,
            frameStart.Y.Scale, 
            frameStart.Y.Offset + delta.Y
        )
    end
end)

-- ========== ABILITY SYSTEMS ========== --
local active = {Jump = false, Speed = false, Flight = false}
local values = {Jump = 50, Speed = 16, Flight = 50}

-- Ability row template
local function CreateRow(yPos, label)
    local container = Instance.new("Frame", mainFrame)
    container.Size = UDim2.new(1, -40, 0, 60)
    container.Position = UDim2.new(0, 20, yPos, 0)
    container.BackgroundTransparency = 1

    local lbl = Instance.new("TextLabel", container)
    lbl.Size = UDim2.new(0.4, 0, 1, 0)
    lbl.Text = label
    lbl.Font = Enum.Font.GothamBold
    lbl.TextColor3 = Color3.new(1,1,1)
    lbl.TextSize = 24

    local txt = Instance.new("TextBox", container)
    txt.Size = UDim2.new(0.3, 0, 0.8, 0)
    txt.Position = UDim2.new(0.4, 0, 0.1, 0)
    txt.BackgroundColor3 = Color3.fromRGB(50, 50, 60)
    txt.TextColor3 = Color3.new(1,1,1)
    Instance.new("UICorner", txt).CornerRadius = UDim.new(0, 8)

    local toggle = Instance.new("TextButton", container)
    toggle.Size = UDim2.new(0.25, 0, 0.8, 0)
    toggle.Position = UDim2.new(0.75, 0, 0.1, 0)
    toggle.Text = "OFF"
    toggle.Font = Enum.Font.GothamBold
    toggle.TextColor3 = Color3.new(1,1,1)
    toggle.BackgroundColor3 = Color3.fromRGB(80, 80, 80)
    Instance.new("UICorner", toggle).CornerRadius = UDim.new(0, 8)

    return txt, toggle
end

-- Create ability rows
local jumpTxt, jumpToggle = CreateRow(0.15, "Jump Height:")
local speedTxt, speedToggle = CreateRow(0.35, "Run Speed:")
local flightTxt, flightToggle = CreateRow(0.55, "Flight Power:")

-- Input handling
local function HandleInput(txtBox, valueName)
    txtBox.FocusLost:Connect(function()
        local num = tonumber(txtBox.Text)
        values[valueName] = num or values[valueName]
        txtBox.Text = tostring(values[valueName])
    end)
end

HandleInput(jumpTxt, "Jump")
HandleInput(speedTxt, "Speed")
HandleInput(flightTxt, "Flight")

-- Toggle system
local function ToggleSystem(btn, stateName)
    btn.MouseButton1Click:Connect(function()
        active[stateName] = not active[stateName]
        btn.Text = active[stateName] and "ON" or "OFF"
        TS:Create(btn, TweenInfo.new(0.2), {
            BackgroundColor3 = active[stateName] and Color3.fromRGB(0, 170, 0) or Color3.fromRGB(80, 80, 80)
        }):Play()
    end)
end

ToggleSystem(jumpToggle, "Jump")
ToggleSystem(speedToggle, "Speed")
ToggleSystem(flightToggle, "Flight")

-- Flight system
local flightVelocity, flightGyro
RS.Heartbeat:Connect(function()
    local chr = player.Character
    if not chr then return end
    local root = chr:FindFirstChild("HumanoidRootPart")
    local hum = chr:FindFirstChildOfClass("Humanoid")
    
    if hum then
        hum.JumpPower = active.Jump and values.Jump or 50
        hum.WalkSpeed = active.Speed and values.Speed or 16
        
        if active.Flight and root then
            if not flightVelocity then
                flightVelocity = Instance.new("BodyVelocity", root)
                flightVelocity.MaxForce = Vector3.new(10000, 10000, 10000)
                flightGyro = Instance.new("BodyGyro", root)
                flightGyro.MaxTorque = Vector3.new(10000, 10000, 10000)
            end
            
            local cam = workspace.CurrentCamera.CFrame
            local moveVec = Vector3.new(
                UIS:IsKeyDown(Enum.KeyCode.D) and 1 or UIS:IsKeyDown(Enum.KeyCode.A) and -1 or 0,
                UIS:IsKeyDown(Enum.KeyCode.Space) and 1 or UIS:IsKeyDown(Enum.KeyCode.LeftShift) and -1 or 0,
                UIS:IsKeyDown(Enum.KeyCode.W) and -1 or UIS:IsKeyDown(Enum.KeyCode.S) and 1 or 0
            )
            
            flightVelocity.Velocity = cam:VectorToWorldSpace(moveVec) * values.Flight
            flightGyro.CFrame = cam
        else
            if flightVelocity then flightVelocity:Destroy() end
            if flightGyro then flightGyro:Destroy() end
        end
    end
end)

-- Teleport system
local tpBox = Instance.new("TextBox", mainFrame)
tpBox.Size = UDim2.new(0.6, 0, 0, 30)
tpBox.Position = UDim2.new(0.05, 0, 0.8, 0)
tpBox.PlaceholderText = "Username"
tpBox.TextColor3 = Color3.new(1,1,1)
Instance.new("UICorner", tpBox).CornerRadius = UDim.new(0, 8)

local tpBtn = Instance.new("TextButton", mainFrame)
tpBtn.Size = UDim2.new(0.3, 0, 0, 30)
tpBtn.Position = UDim2.new(0.65, 0, 0.8, 0)
tpBtn.Text = "TP"
tpBtn.Font = Enum.Font.GothamBold
tpBtn.TextColor3 = Color3.new(1,1,1)
tpBtn.BackgroundColor3 = Color3.fromRGB(0, 170, 0)
Instance.new("UICorner", tpBtn).CornerRadius = UDim.new(0, 8)

tpBtn.MouseButton1Click:Connect(function()
    local target = Players:FindFirstChild(tpBox.Text)
    if target and target.Character and target.Character:FindFirstChild("HumanoidRootPart") then
        player.Character:MoveTo(target.Character.HumanoidRootPart.Position + Vector3.new(0, 5, 0))
    end
end)

-- ========== ANIMATIONS ========== --
local function WoahOpen()
    mainFrame.Visible = true
    TS:Create(mainFrame, TweenInfo.new(0.8, Enum.EasingStyle.Elastic), {
        Size = UDim2.new(0, 700, 0, 500),
        BackgroundTransparency = 0
    }):Play()
end

local function BouncyClose()
    TS:Create(mainFrame, TweenInfo.new(0.5, Enum.EasingStyle.Bounce), {
        Size = UDim2.new(0, 10, 0, 10),
        BackgroundTransparency = 1
    }):Play()
    task.wait(0.5)
    mainFrame.Visible = false
end

-- ========== FINAL TOGGLE ========== --
UIS.InputBegan:Connect(function(input)
    if input.KeyCode == Enum.KeyCode.RightShift and keyValidated then
        gui.Enabled = not gui.Enabled
        if gui.Enabled then
            WoahOpen()
        else
            BouncyClose()
        end
    end
end)

print("right shift to toggle gui")
